<ol class="breadcrumb">
    <li><a href="#/Home">Home</a></li>
    <li><a ui-sref="Things">Things</a></li>
    <li class="active">Create</a></li>
</ol>
<div class="page-header">
    <h1 ng-show="!$stateParams.thingId">Create {{thingName}}</h1>
    <h1 ng-show="$stateParams.thingId">Edit Thing</h1>
    <br />
    <form name="thingForm" novalidate>
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Details</h3>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label for="inputName" class="col-lg-2 control-label">Name</label>
                        <div class="col-lg-10">
                            <input type="text" class="form-control" id="inputName" ng-model="thingName" required/>
                            <span class="help-block">{{100 - thingName.length}} remaining characters</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="textArea" class="col-lg-2 control-label">Description</label>
                        <div class="col-lg-10">
                            <textarea class="form-control" rows="3" id="textArea" ng-model="thingDescription"></textarea>
                            <span class="help-block">{{1000 - thingDescription.length}} remaining characters</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputLongitude" class="col-lg-2 control-label">Longitude</label>
                        <div class="col-lg-10">
                            <input type="text" class="form-control" id="inputLongitude" ng-model="thingLongitude"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputLatitude" class="col-lg-2 control-label">Latitude</label>
                        <div class="col-lg-10">
                            <input type="text" class="form-control" id="inputLatitude" ng-model="thingLatitude"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Things</h3>
                </div>
                <div class="panel-body">
                    <div class="well" ng-repeat="prop in properties">
                        <div class="form-group form-inline">
                            <h4 ng-show="prop.isMainThing">General</h4>
                            <input type="text" class="form-control" ng-model="prop.name" placeholder="Name" ng-show="!prop.isMainThing" required>
                            <input type="text" class="form-control" ng-model="prop.description" placeholder="Description" ng-show="!prop.isMainThing">
                            <button class="btn btn-danger btn-sm" ng-click="removeThing(prop)" ng-show="!prop.isMainThing"><span class="glyphicon glyphicon-trash"></span> </button>
                        </div>
                        <div class="form-group form-inline" ng-repeat="sensor in prop.sensors" style="margin-left: 20px">
                            <input type="text" class="form-control input-sm" ng-model="sensor[0].name" placeholder="Sensor name" required>
                            <select class="form-control input-sm" ng-model="sensor[0].datatype" ng-options="item.id as item.name for item in datatypes">
                            </select>
                            <button class="btn btn-danger btn-sm" ng-click="removeSensor(prop, sensor)"><span class="glyphicon glyphicon-trash"></span> </button>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-primary btn-sm" ng-click="addNewSensor(prop)"><span class="glyphicon glyphicon-plus"></span> <span>Add Sensor</span></button>
                        </div>
                    </div>

                    <div class="form-group">
                        <button class="btn btn-primary btn-sm btn-block" ng-click="addNewProperty()"><span class="glyphicon glyphicon-plus"></span> <span>Add Thing</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="pull-right">
            <a ui-sref="Things"><button type="reset" class="btn btn-default">Cancel</button></a>
            <button type="submit" class="btn btn-primary" ng-click="submit()">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                <span>Create Thing</span>
            </button>
        </div>
    </div>
    </form>
</div>